
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
      html{ margin:0; padding:0; font-size: 16px; }
      body{ margin:0; padding:0; background-color: #EAEAEA;}
      #avatar { width: 128px; height: 128px; display: block; margin: 1em auto; background-color: white; border-radius: 16px; overflow: hidden; }
      #btnnew { display: block; margin: 1em auto; padding: 0.5em 1em; background-color: silver; border: none; border-radius: 5px; }
      #btnnew:active { background-color: white; }
    </style>
  </head>
  <body>
    <div>
      <img id="avatar" src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PC9zdmc+" />
      <button id="btnnew">New</button>
    </div>
    <script type="text/javascript">
      function rnd_avatar(){
        var ret = [];
        var color = Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255);
        ret.push('<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">');
        ret.push('  <rect x="0" y="0" width="32" height="32" fill="rgba(' + color +',0.8)"></rect>');
        for(var i=0; i<3; i++){
          var translate = ((Math.random()>0.5?1:-1)*(Math.random() * 16 + 8 )) + " " + ((Math.random()>0.5?1:-1) * Math.random() * 16 + 8);
          var rotate = Math.random() * 320;
          var color = Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255) + "," + Math.floor(Math.random() * 255);
          ret.push('  <rect x="0" y="0" width="32" height="32" transform="translate(' + translate + ') rotate(' + rotate.toFixed(2) + ' 16 16)" fill="rgba(' + color +',0.8)"></rect>');
        }
        ret.push('</svg>');
        return ret.join("\r\n");
      }
      document.querySelector("#avatar").src="data:image/svg+xml;base64," + window.btoa(rnd_avatar());
      document.querySelector("#btnnew").onclick= function(){
        document.querySelector("#avatar").src="data:image/svg+xml;base64," + window.btoa(rnd_avatar());
      };
    </script>
  </body>
</html>
